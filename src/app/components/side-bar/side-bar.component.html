<div class="h-full">
    <div class="flex flex-col h-full bg-white border-r shadow-sm transition-all duration-300 ease-in-out"
         [ngClass]="{'w-64': isOpen, 'w-20': !isOpen}">
      
      <div class="p-4 bg-gray-50/80 backdrop-blur-sm border-b">
        <div class="flex items-center" [ngClass]="{'gap-3': isOpen, 'justify-between': !isOpen}">
          
          <div class="relative group shrink-0">
            <img [src]="userPicture || '../../../assets/icons/user.png'" 
                 alt="Profile" 
                 class="w-10 h-10 rounded-full border-2 border-white shadow-sm transition-all duration-300 ease-in-out"
                 [ngClass]="{'scale-90': !isOpen}">
            <div class="absolute inset-0 rounded-full bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-200"></div>
          </div>
          
          
          <div class="flex-grow transition-all duration-300 ease-in-out overflow-hidden"
               [ngClass]="{'opacity-0 w-0': !isOpen, 'opacity-100 w-auto': isOpen}">
            <p class="text-sm font-medium text-gray-700 whitespace-nowrap">{{userName || 'Usuario'}}</p>
            <p class="text-xs text-gray-500 whitespace-nowrap">Mi cuenta</p>
          </div>
          <button (click)="toggleSidebar()"
                  class="p-2 rounded-full bg-white shadow-sm hover:bg-gray-100 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-purple-500 shrink-0"
                  [ngClass]="{'ml-2': !isOpen}">
            <img src="../../../assets/icons/right-arrow.png"
                 alt="Toggle sidebar" 
                 class="w-4 h-4 opacity-60 hover:opacity-100 transition-all duration-300 ease-in-out transform"
                 [ngClass]="{'rotate-180': isOpen}">
          </button>
        </div>
      </div>
      <nav class="flex-1 px-4 py-6">
        <div class="space-y-4">
          <a [routerLink]="['/dashboard', 'home']" 
             routerLinkActive="bg-purple-50 text-purple-600"
             class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-50 transition-all duration-200 group">
            <img src="../../../assets/icons/home.png" 
                 alt="dashboard" 
                 class="w-6 h-6 opacity-60 group-hover:opacity-100 transition-all duration-300">
            <span class="ml-3 font-medium text-gray-700 group-hover:text-gray-900 transition-all duration-300 ease-in-out overflow-hidden whitespace-nowrap"
                  [ngClass]="{'opacity-0 w-0': !isOpen, 'opacity-100 w-auto': isOpen}">Dashboard</span>
          </a>
          <a [routerLink]="['/dashboard', 'quotes']" 
             routerLinkActive="bg-purple-50 text-purple-600"
             class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-50 transition-all duration-200 group">
            <img src="../../../assets/icons/stock.png" 
                 alt="quotes" 
                 class="w-6 h-6 opacity-60 group-hover:opacity-100 transition-all duration-300">
            <span class="ml-3 font-medium text-gray-700 group-hover:text-gray-900 transition-all duration-300 ease-in-out overflow-hidden whitespace-nowrap"
                  [ngClass]="{'opacity-0 w-0': !isOpen, 'opacity-100 w-auto': isOpen}">Quotes</span>
          </a>
          <a [routerLink]="['/dashboard', 'portfolio']" 
             routerLinkActive="bg-purple-50 text-purple-600"
             class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-50 transition-all duration-200 group">
            <img src="../../../assets/icons/folder.png" 
                 alt="portfolio" 
                 class="w-6 h-6 opacity-60 group-hover:opacity-100 transition-all duration-300">
            <span class="ml-3 font-medium text-gray-700 group-hover:text-gray-900 transition-all duration-300 ease-in-out overflow-hidden whitespace-nowrap"
                  [ngClass]="{'opacity-0 w-0': !isOpen, 'opacity-100 w-auto': isOpen}">Portfolio</span>
          </a>
        </div>
      </nav>
      <div class="p-4 bg-gray-50/80 backdrop-blur-sm border-t mt-auto">
        <div class="relative">
          <button (click)="toggleConfigMenu()" 
            class="w-full flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200 group config-button">
            <img src="../../../assets/icons/settings.png" 
                alt="settings" 
                class="w-6 h-6 opacity-60 group-hover:opacity-100 transition-all duration-300">
            <span class="ml-3 font-medium text-gray-700 group-hover:text-gray-900 transition-colors duration-200"
                  [ngClass]="{'opacity-0 w-0': !isOpen, 'opacity-100 w-auto': isOpen}">Configuración</span>
          </button>
          <div *ngIf="isConfigMenuOpen" 
             class="absolute bottom-full left-0 mb-2 w-56 bg-white rounded-lg border shadow-lg p-1.5 z-50 config-menu">
          <button (click)="logout()" 
                  class="w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md group transition-colors">
            <img src="../../../assets/icons/logout.png" alt="logout" class="w-4 h-4 opacity-60 group-hover:opacity-100">
            <span>Cerrar sesión</span>
          </button>
        </div>
        </div>
      </div>
    </div>
  </div>